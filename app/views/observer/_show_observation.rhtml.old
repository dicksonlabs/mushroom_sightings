<% name         = @observation.name
   lists        = @observation.species_lists 
   questions_ok = @observation.user.question_email %>

<p>
<% if name 
  approved_synonyms, deprecated_synonyms = name.sort_synonyms
   if approved_synonyms != []
       links = approved_synonyms.map{|n| link_to(textilize_without_paragraph(h(n.display_name)),
            :controller => 'name', :action => "show_name", :id => n)} %>
    <% if name.deprecated %>
      <%= links.length > 1 ? :show_observation_preferred_names.l : :show_observation_preferred_name.l %>:
    <% else %>
      <%= links.length > 1 ? :show_observation_alternative_names.l : :show_observation_alternative_name.l %>:
    <% end %>
    <span class="Data"><%= links.join(', ') %></span><br/>
<% end
end %>

When: <span class="Data"><%= @observation.when %></span><br/>
Where: <span class="Data"><%= h @observation.where %></span><br/>
Who: <span class="Data">
<% if questions_ok %>
  <%= link_to h(@observation.user.unique_text_name),
    :action => 'ask_question', :id => @observation %>
<% else %>
  <%= h @observation.user.unique_text_name %>
<% end %>
</span><br/>
<span class="Data"><%= if @observation.specimen
  'Herbarium specimen available'
else
  'No herbarium specimen'
end %></span></p>

<% if lists.length > 0 %>
  <p>Species Lists:<br/>
    <% for l in lists %>
      <%= link_to l.unique_text_name, :controller => 'species_list', :action => 'show_species_list',
        :id => l %><br/>
    <% end %>
  </p>
<% end %>

<%= textilize("Notes: " + sanitize(@observation.notes.to_s)) %>
