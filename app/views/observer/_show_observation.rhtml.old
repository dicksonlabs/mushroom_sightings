<%
  name         = @observation.name
  lists        = @observation.species_lists
  questions_ok = @observation.user.question_email
%>

<p>
  <% if name
    approved_synonyms, deprecated_synonyms = name.sort_synonyms
    if approved_synonyms != []
      links = approved_synonyms.map do |n|
        link_to(n.display_name.t, :controller => 'name', :action => "show_name", :id => n)
      end
      <% if name.deprecated %>
        <%= links.length > 1 ? :show_observation_preferred_names.t : :show_observation_preferred_name.t %>:
      <% else %>
        <%= links.length > 1 ? :show_observation_alternative_names.t : :show_observation_alternative_name.t %>:
      <% end %>
      <span class="Data"><%= links.join(', ') %></span><br/>
    <% end %>
  <% end %>

  When: <span class="Data"><%= @observation.when %></span><br/>
  Where: <span class="Data"><%= sanitize(@observation.where).t %></span><br/>
  Who: <span class="Data">
    <% if questions_ok %>
      <%= link_to(h(@observation.user.unique_text_name),
                  :action => 'ask_question', :id => @observation.id) %>
    <% else %>
      <%= h(@observation.user.unique_text_name) %>
    <% end %>
  </span><br/>

  <span class="Data">
    <%= if @observation.specimen
      :show_observation_specimen_available.t
    else
      :show_observation_specimen_not_available.t
    end %>
  </span>
</p>

<% if lists.length > 0 %>
  <p>Species Lists:<br/>
    <% for l in lists %>
      <%= link_to(l.unique_text_name, :controller => 'species_list', :action => 'show_species_list',
        :id => l.id) %><br/>
    <% end %>
  </p>
<% end %>

<%= sanitize('*' + :app_notes.l + ':* ' + @observation.notes.to_s)).tpl %>
